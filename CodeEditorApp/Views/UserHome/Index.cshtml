@model CodeEditorApp.Models.ViewModels.UserViewModel

@{
    Layout = "~/Views/UserHome/_Layout.cshtml";
    ViewBag.Title = "UserHomePage";
    List<CodeEditorApp.Models.ViewModels.FolderViewModel> FolderList = ViewBag.Root.Folders;
    ViewBag.NewProject = new CodeEditorApp.Models.ViewModels.ProjectViewModel();
}
<h2>Index</h2>

<body>
    <div class="row">
        <div class="col-md-2 document-list">
        @if (FolderList == null && Model.Projects == null)
        {
            <p>Database is empty</p>
        }
        else
        {
            <ul class="tree2">
                @foreach (CodeEditorApp.Models.ViewModels.ProjectViewModel ProjectItem in @Model.Projects)
                {

                    <li>
                        <a href="#">@ProjectItem.name</a>
                        @ShowSubItems(ProjectItem.SolutionFolder.SubFolders)
                    </li>
                }

                @foreach (CodeEditorApp.Models.ViewModels.FolderViewModel item in FolderList)
                {
                    <li>
                        <a href="#">@item.Name</a>
                        @if (item.SubFolders != null)
                        {
                            ShowSubItems(item.SubFolders);
                        }
                    </li>

                }
            </ul>
        }

                @helper ShowSubItems(List<CodeEditorApp.Models.ViewModels.FolderViewModel> folders)
                { 
                    <ul>
              
                        @foreach (CodeEditorApp.Models.ViewModels.FolderViewModel item in folders)
                        {
                            <li>
                                @item.Name
                                @ShowSubItems(item.SubFolders)
                                
                            </li>
                            foreach (CodeEditorApp.Models.ViewModels.FileViewModel file in item.Files)
                            {
                                <li>@file.name</li>
                            }
                        }
                    </ul>
                }
        </div>
        <div class="col-md-9 project-table">
            <!-- Responsive table starts here -->
            <!-- For correct display on small screens you must add 'data-title' to each 'td' in your table -->
            <div class="table-responsive-vertical shadow-z-1">
                <!-- Table starts here -->
                <table id="table" class="table table-hover table-responsive">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Owner</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.Projects)
                        {
                            <tr>
                                <td data-title="ID">1</td>
                                <td data-title="name-of-project">@Html.ActionLink(@item.name, "../UserHome/OpenProject", new { projectID = @item.ID })</td>
                                <td data-title="project-owner">Jack Daniels</td>
                            </tr>
                        }                      
                    </tbody>
                </table>
            </div>

        </div>
        <div class="col-md-1 add-project">
            <!-- Hér er CreateProject aðgerð -->

            <div id="CreateProjectModal" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div id="CreateProjectContainer" class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dissmiss="modal">&times;</button>
                            <h4 class="modal-title">Modal header</h4>
                        </div>
                        <div class="modal-body">
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>